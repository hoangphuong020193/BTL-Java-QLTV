CREATE TABLE `nhan_vien` (
    Id INT(11) PRIMARY KEY NOT NULL AUTO_INCREMENT,
    Ho NVARCHAR(100) NOT NULL,
    TenLot NVARCHAR(100),
    Ten NVARCHAR(250) NOT NULL,
    TenDangNhap VARCHAR(150) NOT NULL,
    MatKhau VARCHAR(150) NOT NULL,
    NgayTao DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE `doc_gia` (
    Id INT(11) PRIMARY KEY NOT NULL AUTO_INCREMENT,
    Ho NVARCHAR(100) NOT NULL,
    TenLot NVARCHAR(100),
    Ten NVARCHAR(250) NOT NULL,
    MaDocGia VARCHAR(150) NOT NULL,
    NgayTao DATETIME DEFAULT CURRENT_TIMESTAMP,
    Xoa TINYINT(1) DEFAULT 0
);

CREATE TABLE `loai_sach` (
    Id INT(11) PRIMARY KEY NOT NULL AUTO_INCREMENT,
    TenLoaiSach NVARCHAR(250) NOT NULL,
    KieuSach NVARCHAR(250) NOT NULL,
    Xoa TINYINT(1) DEFAULT 0 NOT NULL,
    UNIQUE KEY (TenLoaiSach , KieuSach)
);

CREATE TABLE `tac_gia` (
    Id INT(11) PRIMARY KEY NOT NULL AUTO_INCREMENT,
    TenTacGia NVARCHAR(250) NOT NULL,
    Xoa TINYINT(1) DEFAULT 0 NOT NULL
);

CREATE TABLE `nha_xuat_ban` (
    Id INT(11) PRIMARY KEY NOT NULL AUTO_INCREMENT,
    TenNXB NVARCHAR(250) NOT NULL,
    DiaChi NVARCHAR(250),
    SDT VARCHAR(15),
    Xoa TINYINT(1) DEFAULT 0 NOT NULL
);

CREATE TABLE `sach` (
    Id INT(11) PRIMARY KEY NOT NULL AUTO_INCREMENT,
    TenSach NVARCHAR(250) NOT NULL,
    MaSach VARCHAR(50) UNIQUE KEY NOT NULL,
    IdTacGia INT(11) NOT NULL,
    IdLoaiSach INT(11) NOT NULL,
    IdNXB INT(11) NOT NULL,
    NgayNhap DATETIME,
    SoLuong INT(11) DEFAULT 0,
    Xoa TINYINT(1) DEFAULT 0 NOT NULL,
    FOREIGN KEY (IdTacGia)
        REFERENCES tac_gia (Id)
        ON DELETE NO ACTION ON UPDATE NO ACTION,
    FOREIGN KEY (IdLoaiSach)
        REFERENCES loai_sach (Id)
        ON DELETE NO ACTION ON UPDATE NO ACTION,
    FOREIGN KEY (IdNXB)
        REFERENCES nha_xuat_ban (Id)
        ON DELETE NO ACTION ON UPDATE NO ACTION
);

CREATE TABLE `phieu_muon` (
    Id INT(11) PRIMARY KEY NOT NULL AUTO_INCREMENT,
    IdDocGia INT(11) NOT NULL,
    NgayMuon DATETIME DEFAULT CURRENT_TIMESTAMP,
    NgayTra DATETIME,
    Xoa TINYINT(1) DEFAULT 0 NOT NULL,
    FOREIGN KEY (IdDocGia)
        REFERENCES doc_gia (Id)
        ON DELETE NO ACTION ON UPDATE NO ACTION
);

CREATE TABLE `sach_muon` (
    IdPhieuMuon INT(11) NOT NULL,
    IdSach INT(11) NOT NULL,
    Xoa TINYINT(1) DEFAULT 0 NOT NULL,
    PRIMARY KEY (IdPhieuMuon , IdSach),
    FOREIGN KEY (IdPhieuMuon)
        REFERENCES phieu_muon (Id)
        ON DELETE NO ACTION ON UPDATE NO ACTION,
    FOREIGN KEY (IdSach)
        REFERENCES sach (Id)
        ON DELETE NO ACTION ON UPDATE NO ACTION
)